(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1350:function(e,t,n){"use strict";n.d(t,"l",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return f})),n.d(t,"m",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"n",(function(){return j})),n.d(t,"c",(function(){return C})),n.d(t,"h",(function(){return x})),n.d(t,"j",(function(){return R})),n.d(t,"i",(function(){return S}));var r=n(0),o=n(1),a=n(17),c=n.n(a),i=n(22),s=n(1351),u=n(3),l=n(1352);function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.isPlainObject(o.get(e,t))?o.get(e,"".concat(t,".value"),n):o.get(e,t,n)}var p=function(e){var t=e.rivalId,n=e.rivalType,r=e.cateId,o="",a="",c=r?"&cateId=".concat(r):"";switch(n){case"shop":o="".concat(i.a.shopAnalysis,"?rivalUser1Id=").concat(t).concat(c),a="竞店分析";break;case"item":o="".concat(i.a.itemAnalysis,"?rivalItem1Id=").concat(t).concat(c),a="竞品分析";break;case"brand":o="".concat(i.a.brandAnalysis,"?rivalBrand1Id=").concat(t).concat(c),a="品牌分析";break;default:o="",a=""}return{text:a,href:o}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return function(n){return function(r){var a=e.find((function(e){return o.get(e,t)===n}));return o.get(a,r,"")}}}},y=function(e){return e&&e.isReady&&!o.isNil(e.dateType)},h=function(e,t,n){if(o.isNil(e)||!e.isReady||!e.dateRange||!e.dateType||o.isEmpty(t)||-1===n.indexOf(e.dateType))return!1;var r=e.dateType,a=e.dateRange.split("|")[1];return!!a&&("day"===r?c()(a).isSameOrBefore(c()(t.update1Day)):"week"===r?c()(a).isSameOrBefore(c()(t.updateWeek)):"month"===r?c()(a).isSameOrBefore(c()(t.updateMonth)):"quarter"===r?c()(a).isSameOrBefore(c()(t.updateQuarter)):c()(a).isSameOrBefore(c()(t.updateNDay)))},m=/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i,v=/([a-zA-Z0-9_-])+/,b="//img.alicdn.com/tps/TB1P1W_LXXXXXXoXVXXXXXXXXXX-74-74.png_48x48.jpg",g=function(e){return e?e&&m.exec(e)?e:v.exec(e)?"//img.alicdn.com/tps/".concat(e,"_48x48.jpg"):b:b},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"std",t=-1!==location.href.indexOf("/mc/mq/")?"mq":"ci",n={mq:"anticon anticon-liuliang-a oui-canary-icon oui-canary-icon-liuliang-a",ci:"anticon anticon-vs-hollow oui-canary-icon oui-canary-icon-vs-hollow"},r=document.querySelector(".topLogo");if(r){r.className="topLogo showLogo ".concat(e,"Logo");var o=r.querySelector(".topLogoContent>i");o&&(o.className="".concat(n[t]," ").concat(e,"Icon"))}},O=function(e){return o.get(s.c,e,"")},k=function(e){return"today"===e?["较前日同时段","较昨日同期"]:"day"===e?["较前一日","较上周同期"]:"recent7"===e||"recent30"===e?["较上一周期","较上周同期"]:"week"===e?["较前一周","较去年同期"]:"month"===e?["较前一月","较去年同期"]:[]},j=function(e,t){return o.isEmpty(e)||!o.isPlainObject(e)?null:e.isLoading?r.createElement(u.DtMessage,{hasMask:!1,type:"loading"}):e.hasError?r.createElement(u.DtMessage,{hasMask:!1,type:"error",content:e.errorMsg}):t||null},C=function(e,t){return String(e).toLowerCase().includes(String(t).toLowerCase())},x=function(e){return Object(l.a)(e,"category-compass-profession")?"pro":Object(l.a)(e,"category-compass-standard")?"std":"free"},R=function(e){return Object(l.a)(e,"market-insight-vip")?"vip":Object(l.a)(e,"market-insight-pro")?"pro":Object(l.a)(e,"market-insight-std")?"std":"free"},S=function(e){return Object(l.a)(e,"flow-pro")?"pro":Object(l.a)(e,"source-analy")?"std":"free"}},1351:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var r="https://g.alicdn.com/cards-vendor/china-map-geojson/1.0.4/main.js",o={vip:"豪华版",pro:"专业版",std:"标准版"},a={day:"较前一日",week:"较前一周",month:"较前一月",recent7:"较前 7 日",recent30:"较前 30 日"},c="当前人群数量较小，暂不提供人群画像分析"},1352:function(e,t,n){"use strict";var r=n(1);t.a=function(e,t){if(!r.isEmpty(e)){var n=r.find(e,{moduleCode:t});return n?r.get(n,"hasPermission"):null}return null}},1354:function(e,t,n){"use strict";var r=n(0);n(14);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,t);var n,o,u=s(l);function l(){return a(this,l),u.apply(this,arguments)}return n=l,(o=[{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props))}}])&&c(n.prototype,o),l}(r.Component)}},1360:function(e,t,n){"use strict";var r=n(0);n(1288);var o=function(e){var t=e.links,n=e.layout,o=e.width;return r.createElement("span",{style:{width:o},className:"sycm-mc-link-td-wrapper ".concat(n)},t.map((function(e,t){var n=e.text,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["text"]);return r.createElement("a",Object.assign({key:t},o),n)})))};o.defaultProps=new function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.layout="vertical"},t.a=o},1364:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var r=n(0),o=n(12),a=n.n(o),c=n(3);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=a.a.get(),u=[{text:"搜索词",value:"selfCustomer",id:"selfCustomerId",order:1,color:s.primaryColor},{text:"对比词1",value:"rivalCustomer1",id:"rivalCustomer1Id",order:2,color:s.secondaryColor},{text:"对比词2",value:"rivalCustomer2",id:"rivalShop2Id",order:3,color:s.thirdColor}],l=(u.reduce((function(e,t){var n;return Object.assign(Object.assign({},e),(i(n={},t.id,t),i(n,t.value,t),n))}),{}),[{key:"dayLimitation",num:-1095},{key:"weekLimitation",num:-156},{key:"monthLimitation",num:-36}]),f=function(e){var t=l;return-1!==["vip","pro","std"].indexOf(e)&&(t=function(e){var t={vip:[-1095,-156,-36],pro:[-365,-52,-12],std:[-365,-52,-12]};return[{key:"dayLimitation",num:t[e][0]},{key:"weekLimitation",num:t[e][1]},{key:"monthLimitation",num:t[e][2]}]}(e)),[{text:r.createElement("span",null,r.createElement(c.Icon,{type:"bag-o"})," 概况"),value:"overview",name:"概况",date:{options:["recent7","recent30","day","week","month"],defaultDateType:"day",limitations:t}},{text:r.createElement("span",null,r.createElement(c.Icon,{type:"bag-o"})," 相关分析"),value:"relation",name:"相关分析",date:{options:["recent7","recent30","day","week","month"],defaultDateType:"day",limitations:t}},{text:r.createElement("span",null,r.createElement(c.Icon,{type:"bag-o"})," 类目构成"),value:"cate",name:"类目构成",date:{options:["recent7","recent30","day","week","month"],defaultDateType:"day",limitations:t}}]}},1367:function(e,t,n){"use strict";var r=n(0),o=n(14),a=n(1284),c=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(1293);var y=function e(){d(this,e),this.diffKeyword="",this.currentDiffKeyword=""},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,i=l(f);function f(){var e;return d(this,f),(e=i.apply(this,arguments)).state=new y,e}return t=f,(n=[{key:"renderDiffKeyword",value:function(){var e=this,t=this.props.prefixCls,n=this.state.currentDiffKeyword;return r.createElement("div",{className:"".concat(t,"-search")},r.createElement(c.Input,{placeholder:"请输入对比词",value:n,onChange:function(t){return e.setState({currentDiffKeyword:t.target.value})},onPressEnter:function(t){return e.setState({diffKeyword:t.target.value})},suffix:r.createElement(c.Icon,{type:"del",onClick:function(){e.setState({currentDiffKeyword:"",diffKeyword:""})},style:{cursor:"pointer"}}),style:{width:200}}))}},{key:"render",value:function(){var e=this.state.diffKeyword,t=this.props,n=t.visible,i=t.keyword,s=void 0===i?"":i,u=t.aliasIndexMap,l=t.url,f=t.location,p=t.filter,d=t.prefixCls,y=t.indexes,h=e?[{text:s,value:"self"},{text:e,value:"diff"}]:[{text:s,value:"self"}];return s?r.createElement(c.Modal,{title:"查看趋势",className:"".concat(d,"-modal"),visible:n,onCancel:this.props.onClose,width:640,footer:null},r.createElement(a.a,{useCompareChart:!0,hasCard:!1,showIndexArea:!1,showIndexPicker:!1,useTrendDataScheme:!0,trendDataScheme:h,forceConnectSchemeIndexName:!0,namespace:"sycm-mc-mq-trend-modal",aliasIndexMap:u,dateType:p.dateType,dateRange:p.dateRange,url:{trend:l},trendParams:{device:f.query.device||0,keyword:s.toLowerCase(),diffKeyword:e,cateId:f.query.cateId,indexCode:y[0]},indexes:y,defaultSelectedIndexes:[y[0]],middleAddition:this.renderDiffKeyword(),chartOptions:{colorPanel:o.Constants.CHART_COLOR_PANEL},requestCacheOption:{dtUpdateTime:!1}})):null}}])&&s(t.prototype,n),f}(r.Component);h.defaultProps=new function e(){d(this,e),this.prefixCls="op-mc-search-trend-dialog",this.keyword="",this.visible=!1,this.onClose=function(){return null}},t.a=h},1409:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),a=n(39),c=n.n(a),i=n(14),s=n(3),u=n(21),l=n.n(u),f=n(43),p=n.n(f),d=n(110);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(1311);var w=Object(d.createRequest)(),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}(c);function c(){var e;return g(this,c),(e=a.apply(this,arguments)).state={searchList:[],searchInputValue:"",isSearchActive:!1,dropdownWidth:"200px",isLoading:!1},e.getSearchList=o.debounce((function(t){w({useJsonp:e.props.useJsonp,url:e.props.url,params:{q:t}}).then((function(n){var r=o.take(o.get(n,"result",[]),10);o.isEmpty(r)&&(r=[[t]]),e.setState({searchList:r,isLoading:!1})}))}),500),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.setState({dropdownWidth:l.a.findDOMNode(this.refs.typeahead).getBoundingClientRect().width+"px"})}},{key:"render",value:function(){var e,t,n,a=this,c=this.props,i=c.placeholder,u=c.emptyMsg,l=c.itemOnClick,f=p()("op-mc-search-input",(e={hideBorder:!this.state.isSearchActive},t="".concat("op-mc-search-input","-hideDel"),n=""===this.state.searchInputValue,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return r.createElement(s.Typeahead,{ref:"typeahead",dropdownInBody:!0,className:f,placeholder:i,emptyMsg:this.state.isLoading?"正在搜索...":u,onPressEnter:function(e){e.target.value?(a.setState({searchInputValue:e.target.value,isSearchActive:!1}),l([e.target.value])):(a.getSearchList(e.target.value),a.setState({searchInputValue:e.target.value,isSearchActive:!0,isLoading:!0}))},onChange:function(e){e.target.value?(a.getSearchList(e.target.value),a.setState({searchInputValue:e.target.value,isSearchActive:!0,isLoading:!0})):a.setState({searchInputValue:e.target.value,isSearchActive:!1})},onDelClick:function(){o.isFunction(a.props.onDelClick)&&a.props.onDelClick(),a.setState({searchInputValue:"",isSearchActive:!1})},isActive:this.state.isSearchActive,onOutsideClick:function(){a.setState({isSearchActive:!1})},ItemComponent:function(e){var t=e.data[0].replace(new RegExp(a.state.searchInputValue,"g"),(function(e){return'<a class="blue">'.concat(e,"</a>")}));return r.createElement("div",{className:"".concat("op-mc-search-input","-item-component"),onClick:function(){l(e.data),a.setState({searchInputValue:a.props.showSelectedText?e.data[0]:"",isSearchActive:!1})}},r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))},data:this.state.searchList,value:this.state.searchInputValue,dropdownStyle:Object.assign({width:this.state.dropdownWidth},this.props.dropdownStyle)})}}])&&h(t.prototype,n),c}(r.Component);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}O.defaultProps=new function e(){g(this,e),this.showSelectedText=!1,this.placeholder="请输入商品标题、商品ID、商品URL、货号",this.emptyMsg="没有相关商品",this.useJsonp=!1},n(1312);var T=function(e){C(n,e);var t=R(n);function n(){return _(this,n),t.apply(this,arguments)}return n}(a.BaseReducer),E=function(e){C(n,e);var t=R(n);function n(){return _(this,n),t.apply(this,arguments)}return n}(a.BaseTasks),I=function(e){C(a,e);var t,n,o=R(a);function a(){return _(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"renderSearchInput",value:function(){var e=this,t=this.props.location;return r.createElement(O,{url:"//suggest.taobao.com/sug?code=utf-8&area=c2c&src=shengyicanmou&bucketid=8",useJsonp:!0,itemOnClick:function(n){var r=i.FormatHelper.unescapeHtmlEntity(n[0]);e.context.router.push({pathname:t.pathname,query:Object.assign(Object.assign({},t.query),{keyword:r})})},placeholder:"请输入搜索词，进行深度分析",dropdownStyle:{maxHeight:"400px"}})}},{key:"render",value:function(){var e=this.props.keyword;return r.createElement("div",{className:"op-cc-item-info"},r.createElement("span",{className:"item-keyword"},e),r.createElement("span",{className:"item-search"},this.renderSearchInput()))}}])&&j(t.prototype,n),a}(r.Component);I.contextTypes={router:r.PropTypes.object},I.defaultProps=new function e(){_(this,e)};var D=c()({State:function e(){_(this,e)},Reducer:T,Tasks:E,View:I,defaultNamespace:"sycm-mc-mq-keyword-info",mapStateToProps:function(e,t,n){return Object.assign(Object.assign({},e),t)}}),q=n(1364);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(1313);var W=s.utils.dtDatePickerHelper.getLimitations,U=function e(){K(this,e)},V=function(e){B(n,e);var t=M(n);function n(){return K(this,n),t.apply(this,arguments)}return n}(a.BaseReducer),X=function(e){B(n,e);var t=M(n);function n(){return K(this,n),t.apply(this,arguments)}return n}(a.BaseTasks),F=function(e){B(n,e);var t=M(n);function n(){var e;return K(this,n),(e=t.apply(this,arguments)).data={},e}return n}(U),G=function(e){B(c,e);var t,n,a=M(c);function c(e){var t;return K(this,c),(t=a.call(this,e)).state={searchTabs:Object(q.b)(e.edition)},t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.location,t=this.state.searchTabs.find((function(t){return t.value===e.query.activeKey}));if(!o.get(t,"date.enable",!0)){var n=e.query.activeKey;i.Goldlog.record("/sycm.cc.item_".concat(n),"CLK","","GET")}}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.commDate,a=e.edition,c=this.props.activeKey||t.query.activeKey||this.state.searchTabs[0].value,s=this.state.searchTabs.find((function(e){return e.value===c})),u={switchName:"activeKey",enable:!0,options:this.state.searchTabs},l=o.get(s,"date.defaultDateType");return r.createElement(i.FaCommonFilter,{className:"".concat("sycm-mc-search-analyze","-commonFilter ").concat(a,"-edition"),location:t,syncWithUrl:!0,children:r.createElement(D,{keyword:t.query.keyword,location:t,commDate:n}),childPosition:"bottom-left",tabSwitch:u,date:Object.assign(Object.assign(Object.assign(Object.assign({key:c},n),{enable:o.get(s,"date.enable",!0)}),W(Object.assign(Object.assign({},n),{limitations:s.date.limitations}))),{options:s.date.options,defaultDateType:l}),device:{enable:!0,position:"top-right"},pageName:"sycm-mc-search-analyze"})}}])&&H(t.prototype,n),c}(r.Component);G.defaultProps=new F,G=function(e,t,n,r){var o,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(a<3?o(c):a>3?o(t,n,c):o(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}([Object(i.meta)({useRobot:420}),function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],G);var J=c()({State:U,Reducer:V,Tasks:X,View:G,defaultNamespace:"sycm-mc-mq-item-page-header",mapStateToProps:function(e,t,n){return Object.assign(Object.assign({},e),t)}}),Y=n(1350);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(1314);var ie=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function c(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((r=r.apply(e,t||[])).next())}))},se=s.Card.CardContent,ue="op-mc-item-archives-search",le=function e(){ce(this,e),this.historyData={isLoading:!0,hasError:!1,data:[]}},fe=function(e){ee(n,e);var t=ne(n);function n(){return ce(this,n),t.apply(this,arguments)}return Q(n,[{key:"setState",value:function(e){return Object.assign(Object.assign({},this.state),e)}}]),n}(a.BaseReducer),pe=function(e){ee(n,e);var t=ne(n);function n(){return ce(this,n),t.apply(this,arguments)}return Q(n,[{key:"fetchHistory",value:function(){this.effects.fetch("/mc/searchword/history.json",{},"historyData")}},{key:"mount",value:function(){return ie(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchHistory();case 1:case"end":return e.stop()}}),e,this)})))}}]),n}(a.BaseTasks),de=function(e){ee(n,e);var t=ne(n);function n(){return ce(this,n),t.apply(this,arguments)}return n}(le),ye=[{icon:"xiaoliangyuce",title:"搜索词概况",comment:"提供搜索词长期趋势分析，判断市场及用户需求变化"},{icon:"swap",title:"相关词分析",comment:"提供搜索相关词分析，判断关键词竞争度及相关性"},{icon:"menu-category-o",title:"搜索词类目构成",comment:"提供搜索词在各类目的占比、点击及点击率分析"}],he=function(e){ee(n,e);var t=ne(n);function n(){var e;return ce(this,n),(e=t.apply(this,arguments)).handleClick=function(t){return ie(oe(e),void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.Request)({url:"/mc/searchword/record.json",params:{keyword:t}});case 2:n=this.props.location,this.context.router.push({pathname:n.pathname,query:Object.assign(Object.assign({},n.query),{keyword:t})});case 4:case"end":return e.stop()}}),e,this)})))},e}return Q(n,[{key:"renderSearchInput",value:function(){var e=this;return r.createElement(O,{url:"//suggest.taobao.com/sug?code=utf-8&area=c2c&src=shengyicanmou&bucketid=8",useJsonp:!0,itemOnClick:function(t){var n=i.FormatHelper.unescapeHtmlEntity(t[0]);e.handleClick(n)},placeholder:"请输入搜索词，进行深度分析",dropdownStyle:{maxHeight:"400px"}})}},{key:"renderFunction",value:function(){return r.createElement("div",{className:"".concat(ue,"-function")},ye.map((function(e,t){return r.createElement("div",{className:"function-items",key:"function-items".concat(t)},r.createElement("span",{className:"".concat(ue,"-icon")},r.createElement(s.Icon,{type:e.icon})),r.createElement("div",{className:"".concat(ue,"-comment")},r.createElement("h6",null,e.title),r.createElement("span",null,e.comment)))})))}},{key:"render",value:function(){var e=this,t=this.props.historyData.data;return r.createElement(s.Card,{className:"".concat(ue,"-container")},r.createElement(se,null,r.createElement("h1",null,"搜索词分析"),r.createElement("div",{style:{width:800,margin:"auto"}},this.renderSearchInput(),o.isEmpty(t)?null:r.createElement("div",{className:"".concat(ue,"-history")},"历史搜索：",t.map((function(t,n){return r.createElement("span",{key:"record-".concat(n),onClick:e.handleClick.bind(e,t)},t)})))),this.renderFunction()))}}]),n}(r.Component);he.contextTypes={router:r.PropTypes.object},he.defaultProps=new de;var me=c()({State:le,Reducer:fe,Tasks:pe,View:he,defaultNamespace:"sycm-mc-mq-search-analyze-home",mapStateToProps:function(e,t,n){return Object.assign(Object.assign({},e),t)}}),ve=(n(1315),n(1284));function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Se=function e(){Re(this,e),this.prefixCls="sycm-mc-search-analyze",this.currentDiffKeyword="",this.diffKeyword=""},Pe=function(e){Oe(n,e);var t=je(n);function n(){return Re(this,n),t.apply(this,arguments)}return we(n,[{key:"setCurrentDiffKeyword",value:function(e){return Object.assign(Object.assign({},this.state),{currentDiffKeyword:e})}},{key:"setDiffKeyword",value:function(e){return Object.assign(Object.assign({},this.state),{diffKeyword:e})}}]),n}(a.BaseReducer),_e=function(e){Oe(n,e);var t=je(n);function n(){return Re(this,n),t.apply(this,arguments)}return n}(a.BaseTasks),Te=function(e){Oe(n,e);var t=je(n);function n(){return Re(this,n),t.apply(this,arguments)}return n}(Se),Ee=function(e){Oe(n,e);var t=je(n);function n(){return Re(this,n),t.apply(this,arguments)}return we(n,[{key:"renderDiffKeyword",value:function(){var e=this,t=this.props,n=t.currentDiffKeyword,o=t.prefixCls;return r.createElement("div",{className:"".concat(o,"-search")},r.createElement(s.Input,{placeholder:"请输入对比词",value:n,onChange:function(t){return e.props.actions.setCurrentDiffKeyword(t.target.value)},onPressEnter:function(t){return e.props.actions.setDiffKeyword(t.target.value)},suffix:r.createElement(s.Icon,{type:"del",onClick:function(){e.props.actions.setCurrentDiffKeyword(""),e.props.actions.setDiffKeyword("")},style:{cursor:"pointer"}}),style:{width:200}}))}},{key:"render",value:function(){var e=this.props,t=e.aliasIndexMap,n=e.filter,o=e.keyword,a=void 0===o?"":o,c=e.diffKeyword,s=["seIpvUvHits","sePvIndex","clickHits","clickHot","clickRate","tradeIndex","payConvRate"],u=c?[{text:a,value:"self"},{text:c,value:"diff"}]:[{text:a,value:"self"}];return r.createElement(ve.a,{useCompareChart:!0,showIndexArea:!0,showIndexPicker:!1,useTrendDataScheme:!0,trendDataScheme:u,forceConnectSchemeIndexName:!0,namespace:"sycm-mc-mq-search-trend",cardTitle:"趋势分析",aliasIndexMap:t,dateType:n.dateType,dateRange:n.dateRange,url:{main:"/mc/searchword/overview.json",trend:"/mc/searchword/propertyTrend.json"},mainParams:{device:n.device,keyword:a.toLowerCase()},trendParams:{device:n.device,keyword:a.toLowerCase(),diffKeyword:c},subIndexes:[{showText:!0,value:"cycleCrc"}],indexType:"radioGroupMultipleLine",indexPickerType:"radio",indexes:s,defaultSelectedIndexes:[s[0]],indexesNumPerLine:5,middleAddition:this.renderDiffKeyword(),chartOptions:{colorPanel:i.Constants.CHART_COLOR_PANEL},requestCacheOption:{dtUpdateTime:!1}})}}]),n}(r.Component);Ee.defaultProps=new Te,Ee.contextTypes={router:r.PropTypes.object};var Ie=c()({State:Se,Reducer:Pe,Tasks:_e,View:Ee,defaultNamespace:"sycm-mc-mq-search-overview",mapStateToProps:function(e,t){return Object.assign(Object.assign({},e),t)}}),De=n(17),qe=n.n(De),He=n(1277),Be=n(1360),Ne=n(1367),Me=n(22);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ge=s.Card.CardHeader,Je=s.Card.CardContent,Ye=s.Card.CardHeaderItem,Ze=function e(){Fe(this,e),this.prefixCls="sycm-mc-search-analyze",this.tab=[{text:"相关搜索词",value:"relatedWord"},{text:"关联品牌词",value:"relatedBrand"},{text:"关联修饰词",value:"relatedProperty"},{text:"关联热词",value:"relatedHotWord"}],this.activeTab="relatedWord"},$e=function(e){ze(n,e);var t=Ue(n);function n(){return Fe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"setActiveTab",value:function(e){return Object.assign(Object.assign({},this.state),{activeTab:e})}}]),n}(a.BaseReducer),Qe=function(e){ze(n,e);var t=Ue(n);function n(){return Fe(this,n),t.apply(this,arguments)}return n}(a.BaseTasks),et=function(e){ze(n,e);var t=Ue(n);function n(){return Fe(this,n),t.apply(this,arguments)}return n}(Ze),tt=function e(){Fe(this,e),this.visible=!1,this.keyword=""},nt=function(e){ze(n,e);var t=Ue(n);function n(){var e;return Fe(this,n),(e=t.apply(this,arguments)).state=new tt,e.handleTabSwitch=function(t){e.props.actions.setActiveTab(t)},e.handleTrendClick=function(t){e.setState({keyword:Object(Y.g)(t,"keyword"),visible:!0}),i.Goldlog.record("/sycm.research_analysis.se_word_trend","CLK")},e.handleHideModal=function(){e.setState({visible:!1})},e}return Ke(n,[{key:"componentDidMount",value:function(){i.Goldlog.record("/sycm.research_analysis.contrastive_analysis","EXP")}},{key:"renderTrend",value:function(){var e=this.state,t=e.visible,n=e.keyword,o=this.props,a=o.filter,c=o.aliasIndexMap,i=o.location;return r.createElement(Ne.a,{indexes:["seIpvUvHits"],keyword:n,visible:t,aliasIndexMap:c,commDate:a.commDate,location:i,filter:a,onClose:this.handleHideModal,url:"/mc/searchword/relatedWord/trend.json"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.aliasIndexMap,o=t.filter,a=t.activeTab,c=t.keyword,u=void 0===c?"":c,l=t.tab,f=t.location,p=t.edition,d={relatedWord:{url:"/mc/searchword/relatedWord.json",indexes:["seIpvUvHits","sePvIndex","clickRate","clickHits","clickHot","tradeIndex","payConvRate","onlineGoodsCnt","tmClickRatio","p4pAmt"]},relatedBrand:{url:"/mc/searchword/relatedBrand.json",indexes:["seIpvUvHits","relSeWordCnt","avgWordClickRate","clickHits","avgWordPayRate"]},relatedProperty:{url:"/mc/searchword/relatedProperty.json",indexes:["seIpvUvHits","relSeWordCnt","avgWordClickRate","clickHits","avgWordPayRate"]},relatedHotWord:{url:"/mc/searchword/relatedHotWord.json",indexes:["seIpvUvHits","relSeWordCnt","avgWordClickRate","clickHits","avgWordPayRate"]}};return r.createElement(s.Card,{name:"相关词分析"},r.createElement(Ge,null,r.createElement(Ye,{type:"left"},r.createElement(s.TabSwitch,{activeTab:a,data:l,onChange:this.handleTabSwitch})),"day"===o.dateType&&"relatedWord"===a&&"std"!==p?r.createElement(Ye,{type:"right"},r.createElement(s.Button,{type:"primary",onClick:function(){i.Goldlog.record("/sycm.research_analysis.contrastive_analysis","CLK");var t=o.dateRange.split("|")[0],n=qe()(t).subtract(7,"day").format("YYYY-MM-DD");e.context.router.push({pathname:f.pathname,query:Object.assign(Object.assign({},f.query),{analyzeTab:"new",dateType:"day",currentDate:t,dateRange:"".concat(n,"|").concat(n)})})}},"对比分析")):null),r.createElement(Je,null,this.renderTrend(),["day","recent7","recent30"].indexOf(o.dateType)>-1?r.createElement(He.a,{namespace:"sycm-mc-mq-relate-analysis",hasCard:!1,hasIndexPicker:"relatedWord"===a,hasRank:!1,loadAllRowAtOnce:!0,hasPageSizePicker:!0,pageSizeCnt:[5,10,20,50,100],aliasIndexMap:n,urls:{main:d[a].url},params:{keyword:u.toLowerCase(),device:o.device},dateType:o.dateType,dateRange:o.dateRange,indexes:d[a].indexes,sortable:{enable:!0,order:"desc",orderBy:"seIpvUvHits",hasDefaultSort:!0},leftColumns:[{dataIndex:"keyword",title:"搜索词",render:function(e,t){return Object(Y.g)(t,"keyword")}}],rightColumns:[{dataIndex:"operate",title:"操作",render:function(t,n){var o=[{text:"搜索分析",target:"_blank",href:e.context.router.createHref({pathname:Me.b.searchAnalyze,query:{keyword:Object(Y.g)(n,"keyword")}})},{text:"人群分析",target:"_blank",href:e.context.router.createHref({pathname:Me.b.searchCustomer,query:Object.assign(Object.assign({},f.query),{selfCustomerId:Object(Y.g)(n,"keyword")})})}];return"relatedWord"===a&&o.unshift({text:"趋势",onClick:e.handleTrendClick.bind(e,n)}),r.createElement(Be.a,{width:"relatedWord"===a?140:110,layout:"horizontal",links:o})}}],requestCacheOption:{dtUpdateTime:!1}}):r.createElement(s.DtMessage,{isActive:!0,hasMask:!1,type:"info",content:"本模块仅展现最近30日内数据"})))}}]),n}(r.Component);nt.defaultProps=new et,nt.contextTypes={router:r.PropTypes.object};var rt=c()({State:Ze,Reducer:$e,Tasks:Qe,View:nt,defaultNamespace:"sycm-mc-mq-search-relation",mapStateToProps:function(e,t,n){return Object.assign(Object.assign({},e),t)}});function ot(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ft(e);if(t){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(1316);var yt=s.utils.dtDatePickerHelper.getLimitations,ht=[{text:r.createElement("span",{className:"".concat("search-relation-analyze","-tab-item")},"新上榜词",r.createElement(s.Tooltip,{title:"当前日期新上榜词，对比日期无此搜索词"},r.createElement(s.Icon,{type:"doubt-o"}))),value:"new"},{text:"飙升词",value:"soar"},{text:r.createElement("span",{className:"".concat("search-relation-analyze","-tab-item")},"下榜词",r.createElement(s.Tooltip,{title:"当前日期下榜词，对比日期有此搜索词。下榜词搜索人气等指标取统计日期数据，不是当前日期数据"},r.createElement(s.Icon,{type:"doubt-o"}))),value:"down"}],mt=function e(){pt(this,e)},vt=function(e){it(n,e);var t=ut(n);function n(){return pt(this,n),t.apply(this,arguments)}return n}(a.BaseReducer),bt=function(e){it(n,e);var t=ut(n);function n(){return pt(this,n),t.apply(this,arguments)}return n}(a.BaseTasks),gt=function(e){it(n,e);var t=ut(n);function n(){return pt(this,n),t.apply(this,arguments)}return n}(mt),wt=function e(){pt(this,e),this.visible=!1,this.keyword=""},Ot=function(e){it(c,e);var t,n,a=ut(c);function c(){var e;return pt(this,c),(e=a.apply(this,arguments)).state=new wt,e.handleTrendClick=function(t){e.setState({keyword:Object(Y.g)(t,"keyword"),visible:!0});var n=e.props.filter.analyzeTab;i.Goldlog.record({new:"/sycm.research_analysis.CA_new_words_trend",soar:"/sycm.research_analysis.CA_soar_trend",down:"/sycm.research_analysis.CA_down_words_trend"}[n],"CLK")},e.handleHideModal=function(){e.setState({visible:!1})},e}return t=c,(n=[{key:"commonDate",get:function(){return o.get(this.props.commDate,"mc_mq_search_analyze_relation",{})}},{key:"renderTrend",value:function(){var e=this.state,t=e.visible,n=e.keyword,o=this.props,a=o.filter,c=o.aliasIndexMap,i=o.location,s=i.query.currentDate;return r.createElement(Ne.a,{indexes:["seIpvUvHits"],keyword:n,visible:t,aliasIndexMap:c,commDate:this.commonDate,filter:Object.assign(Object.assign({},a),{dateRange:"".concat(s,"|").concat(s)}),location:i,url:"/mc/searchword/relatedWord/trend.json",onClose:this.handleHideModal})}},{key:"renderChild",value:function(){var e=this,t=this.props.location,n=t.query.currentDate;return r.createElement("span",null,r.createElement("span",{className:"".concat("search-relation-analyze","-back"),onClick:function(){e.context.router.push({pathname:t.pathname,query:Object.assign(Object.assign({},o.omit(t.query,["analyzeTab","dateType","dateRange","currentDate"])),{dateRange:"".concat(n,"%7C").concat(n)})})}},r.createElement(s.Icon,{type:"angle-left"})," 返回"),r.createElement("span",{className:"".concat("search-relation-analyze","-current")},"当前日期 ",n))}},{key:"renderContent",value:function(){var e=this,t=this.props,n=t.aliasIndexMap,o=t.filter,a=t.location;if(!o||!o.isReady)return null;var c=o.dateRange.split("|")[0],i=["seIpvUvHits","sePvIndex","clickRate","clickHits","clickHot","tradeIndex","payConvRate","onlineGoodsCnt","tmClickRatio","p4pAmt","seRiseRate"],s=o.analyzeTab;return"soar"!==s&&i.pop(),r.createElement(He.a,{namespace:"sycm-mc-related-word-analyze",hasCard:!0,hasIndexPicker:!0,hasRank:!1,loadAllRowAtOnce:!0,hasPageSizePicker:!0,pageSizeCnt:[5,10,20,50,100],aliasIndexMap:n,urls:{main:"/mc/searchword/relatedWord/comparison.json"},params:{keyword:a.query.keyword.toLowerCase(),currentDate:a.query.currentDate,comparedDate:c,type:o.analyzeTab,device:a.query.device||0,indexCode:void 0},indexes:i,defaultSelectedIndexes:[].concat(ot(i.slice(0,4)),["soar"===s?"seRiseRate":"clickHot"]),sortable:{enable:!0,order:"desc",orderBy:"soar"===s?"seRiseRate":"seIpvUvHits",hasDefaultSort:!0},leftColumns:[{dataIndex:"keyword",title:"搜索词",render:function(e,t){return Object(Y.g)(t,"keyword")}}],rightColumns:[{dataIndex:"operate",title:"操作",render:function(t,n){return r.createElement(Be.a,{width:140,layout:"horizontal",links:[{text:"趋势",onClick:e.handleTrendClick.bind(e,n)},{text:"搜索分析",target:"_blank",href:e.context.router.createHref({pathname:Me.b.searchAnalyze,query:{keyword:Object(Y.g)(n,"keyword")}})},{text:"人群分析",target:"_blank",href:e.context.router.createHref({pathname:Me.b.searchCustomer,query:Object.assign(Object.assign({},a.query),{selfCustomerId:Object(Y.g)(n,"keyword")})})}]})}}],requestCacheOption:{dtUpdateTime:!1}})}},{key:"render",value:function(){var e=this.props.location;return r.createElement("div",{className:"search-relation-analyze"},r.createElement(i.FaCommonFilter,{className:"".concat("search-relation-analyze","-commonFilter"),location:e,syncWithUrl:!0,children:this.renderChild(),childPosition:"top-left",tabSwitch:{switchName:"analyzeTab",enable:!0,options:ht},date:Object.assign(Object.assign(Object.assign(Object.assign({},this.commonDate),{options:["day"]}),yt(Object.assign(Object.assign({},this.commonDate),{limitations:[{key:"dayLimitation",num:-90}]}))),{defaultDateType:"day"}),pageName:"search-relation-analyze",onChange:function(e,t){if("tabSwitch"===e){var n=t.analyzeTab;i.Goldlog.record({new:"/sycm.research_analysis.CA_new_words_button",soar:"/sycm.research_analysis.CA_soar",down:"/sycm.research_analysis.CA_down_words"}[n],"CLK")}}}),this.renderContent(),this.renderTrend())}}])&&ct(t.prototype,n),c}(r.Component);Ot.defaultProps=new gt,Ot.contextTypes={router:r.PropTypes.object},Ot=function(e,t,n,r){var o,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":dt(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(a<3?o(c):a>3?o(t,n,c):o(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}([Object(i.meta)({useCommDate:!0,commDateCode:"mc_mq_search_analyze_relation"})],Ot);var kt=c()({State:mt,Reducer:vt,Tasks:bt,View:Ot,defaultNamespace:"sycm-mc-mq-search-realtion-analyze",mapStateToProps:function(e,t,n){return Object.assign(Object.assign(Object.assign({},e),t),{filter:n.filters["search-relation-analyze"]})}});function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t&&jt(e.prototype,t),n&&jt(e,n),e}function xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var It=s.utils.formatHelper.format,Dt=s.Card.CardContent,qt=function e(){Tt(this,e),this.prefixCls="sycm-mc-search-analyze",this.category={data:[],isLoading:!0,hasError:!1}},Ht=function(e){xt(n,e);var t=St(n);function n(){return Tt(this,n),t.apply(this,arguments)}return Ct(n,[{key:"setCateId",value:function(e){return Object.assign(Object.assign({},this.state),{cateId:e})}}]),n}(a.BaseReducer),Bt=function(e){xt(n,e);var t=St(n);function n(){return Tt(this,n),t.apply(this,arguments)}return Ct(n,[{key:"getCategory",value:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function c(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.effects.fetch("/mc/searchword/getCategory.json",{params:Object.assign(Object.assign({},e),{dtUpdateTime:!1})},"category");case 2:case"end":return t.stop()}}),t,this)})))}}]),n}(a.BaseTasks),Nt=function(e){xt(n,e);var t=St(n);function n(){return Tt(this,n),t.apply(this,arguments)}return n}(qt),Mt=function(e){xt(n,e);var t=St(n);function n(){var e;return Tt(this,n),(e=t.apply(this,arguments)).getCateData=function(t){e.props.actions.getCategory({dateType:o.get(t,"filter.dateType"),dateRange:o.get(t,"filter.dateRange"),keyword:o.get(t,"keyword","").toLowerCase(),device:o.get(t,"filter.device")})},e.handleCategoryTabSwitch=function(t){e.props.actions.setCateId(t)},e}return Ct(n,[{key:"componentDidMount",value:function(){this.getCateData(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.filter,r=t.keyword,a=t.cateId;Object(Y.a)(o.get(e,"filter"))&&(o.get(e,"filter.dateType")===o.get(n,"dateType")&&o.get(e,"filter.dateRange")===o.get(n,"dateRange")&&o.get(e,"filter.device")===o.get(n,"device")&&o.get(e,"keyword")===r||o.get(e,"keyword")&&this.getCateData(e)),!o.get(e,"category.data.data",[]).length||a&&o.get(e,"category.data.data",[]).slice(0,5).find((function(e){return e.cateId===a}))||this.props.actions.setCateId(o.get(e,"category.data.data",[])[0].cateId)}},{key:"renderCategoryMenu",value:function(){var e,t=this.props,n=t.prefixCls,a=t.aliasIndexMap,c=t.category,i=t.cateId;return c.data.data&&(e=o.take(c.data.data.map((function(e){return Object.assign(Object.assign({},e),{text:e.cateName,value:e.cateId})})),5)),r.createElement(s.TabSwitch,{ItemComponent:function(e){var t={text:o.get(a,"clickHits.text","-"),value:It(o.get(e,"data.clickHits"),o.get(a,"clickHits.format"))},n={text:o.get(a,"clickHitsRatio.text","-"),value:It(o.get(e,"data.clickHitsRatio"),o.get(a,"clickHitsRatio.format"))};return r.createElement("div",{className:e.className,onClick:e.onClick},r.createElement("div",{className:"title",title:e.data.cateName},e.data.cateName),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,t.text),r.createElement("td",null,t.value)),r.createElement("tr",null,r.createElement("td",null,n.text),r.createElement("td",null,n.value)))))},className:"".concat(n,"-cate-menu"),data:e,activeKey:i,onChange:this.handleCategoryTabSwitch})}},{key:"renderCategory",value:function(){var e=this.props,t=e.aliasIndexMap,n=e.filter,a=e.keyword,c=e.cateId,i=e.category,u=Object(Y.n)(i);if(u)return u;var l=o.get(i,"data.data");return l&&!l.length?r.createElement(s.DtMessage,{hasMask:!1,type:"info",content:"\b\b暂无数据"}):c&&a?r.createElement(He.a,{namespace:"sycm-mc-mq-category-constitute",hasCard:!1,hasIndexPicker:!1,hasRank:!1,hasPageSizePicker:!0,aliasIndexMap:t,urls:{main:"/mc/searchword/getCategory.json"},params:{keyword:a.toLowerCase(),device:n.device,level1Id:c},dateType:n.dateType,dateRange:n.dateRange,indexes:["clickHits","clickHitsRatio","clickHot","clickCntRatio","clickRate"],sortable:{enable:!0,order:"desc",orderBy:"clickHits",hasDefaultSort:!0},leftColumns:[{dataIndex:"cateName",title:"类目名称",render:function(e,t){return Object(Y.g)(t,"cateName")}}],requestCacheOption:{dtUpdateTime:!1}}):null}},{key:"render",value:function(){return r.createElement(s.Card,{name:"类目构成"},r.createElement(Dt,null,this.renderCategoryMenu(),this.renderCategory()))}}]),n}(r.Component);Mt.defaultProps=new Nt,Mt.contextTypes={router:r.PropTypes.object},Mt=function(e,t,n,r){var o,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Et(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(a<3?o(c):a>3?o(t,n,c):o(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}([i.viewDecorator],Mt);var Lt=c()({State:qt,Reducer:Ht,Tasks:Bt,View:Mt,defaultNamespace:"sycm-mc-mq-search-category",mapStateToProps:function(e,t,n){return Object.assign(Object.assign({},e),t)}}),At=n(1354);function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t,n){return t&&Kt(e.prototype,t),n&&Kt(e,n),e}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);if(t){var o=Ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(e,t){return!t||"object"!==Jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yt={overview:Ie,relation:rt,cate:Lt},Zt=function e(){Gt(this,e),this.edition="vip"},$t=function(e){Wt(n,e);var t=Vt(n);function n(){return Gt(this,n),t.apply(this,arguments)}return zt(n,[{key:"setState",value:function(e){return Object.assign(Object.assign({},this.state),e)}}]),n}(a.BaseReducer),Qt=function(e){Wt(n,e);var t=Vt(n);function n(){return Gt(this,n),t.apply(this,arguments)}return zt(n,[{key:"mount",value:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function c(e){try{s(r.next(e))}catch(e){a(e)}}function i(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.effects.fetch("/mc/common/getShopCate.json",{});case 2:t=e.sent,n=t.filter((function(e){return 0===e[0]})).map((function(e){return e[4]})),r="vip",n.includes("vip")?r="vip":n.includes("pro")?r="pro":n.includes("std")&&(r="std"),this.actions.setState({edition:r});case 7:case"end":return e.stop()}}),e,this)})))}}]),n}(a.BaseTasks),en=function(e){Wt(n,e);var t=Vt(n);function n(){return Gt(this,n),t.apply(this,arguments)}return n}(Zt),tn=function(e){Wt(n,e);var t=Vt(n);function n(){var e;return Gt(this,n),(e=t.apply(this,arguments)).state={reloadKey:0},e.switchTo=function(t,n){var r=e.props.location,o=n?Object.assign(Object.assign({},r.query),{keyword:n,activeKey:t}):Object.assign(Object.assign({},r.query),{activeKey:t});e.context.router.push({pathname:r.pathname,query:o}),e.setState({reloadKey:++e.state.reloadKey})},e}return zt(n,[{key:"commonDate",get:function(){var e=(this.props.filter||{}).activeKey;return o.get(this.props.commDate,"mc_mq_search_analyze_".concat(e),{})}},{key:"componentDidMount",value:function(){Object(Y.m)(this.props.edition)}},{key:"shouldComponentUpdate",value:function(e,t){return!o.isEqual(e.location,this.props.location)||!o.isEqual(e.filter,this.props.filter)}},{key:"renderSearch",value:function(){var e=this.props,t=e.location,n=e.aliasIndexMap;return r.createElement(me,{location:t,aliasIndexMap:n})}},{key:"renderPageHeader",value:function(){var e=this.props,t=e.location,n=e.edition;return r.createElement(J,{key:"".concat("sycm-mc-search-analyze","-page-header"),commDate:this.commonDate,location:t,edition:n})}},{key:"renderPage",value:function(){var e=this.props,t=e.filter,n=e.aliasIndexMap,o=e.location,a=e.edition;return Yt[t.activeKey]?r.createElement(Yt[t.activeKey],{key:"".concat("sycm-mc-search-analyze","-").concat(t.activeKey),filter:t,aliasIndexMap:n,location:o,keyword:o.query.keyword,switchTo:this.switchTo,edition:a}):null}},{key:"renderContent",value:function(){var e=this.props,t=e.filter,n=e.location,a=e.aliasIndexMap,c=e.edition,i=Object(q.b)(c).find((function(e){return e.value===o.get(t,"activeKey")}));return n.query.keyword?n.query.analyzeTab?r.createElement(kt,{location:n,aliasIndexMap:a}):[this.renderPageHeader(),Object(Y.b)(t,this.commonDate,o.get(i,"date.options",[]))&&this.renderPage()]:this.renderSearch()}},{key:"render",value:function(){var e=this.props.modulesPermission;if("free"===Object(Y.j)(e)){var t=o.get(this.context,"router.push");o.isFunction(t)&&t("/mc/mq/auth?editions=std,pro,vip&group=搜索洞察")}return r.createElement("div",{className:"".concat("sycm-mc-search-analyze","-container"),key:"".concat(this.state.reloadKey)},this.renderContent())}}]),n}(r.Component);tn.contextTypes={router:r.PropTypes.object},tn.defaultProps=new en,tn=function(e,t,n,r){var o,a=arguments.length,c=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Jt(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(a<3?o(c):a>3?o(t,n,c):o(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}([i.viewDecorator,Object(i.meta)({useRobot:420,useAliasIndexes:!0,useSpm:!0,useCommDate:!0,usePermission:!0,commDateCode:"mc_mq_search_analyze_cate,mc_mq_search_analyze_overview,mc_mq_search_analyze_relation"})],tn),t.default=c()({State:Zt,Reducer:$t,Tasks:Qt,View:Object(At.a)(tn),defaultNamespace:"sycm-mc-mq-search-analyze",mapStateToProps:function(e,t,n){return Object.assign(Object.assign(Object.assign({},e),t),{filter:n.filters["sycm-mc-search-analyze"],modulesPermission:n.frame.modulesPermission})}})}}]);
